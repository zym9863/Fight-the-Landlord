# 斗地主 (Fight the Landlord)

[English](README-EN.md)

一款单机斗地主游戏，玩家对战两个AI，纯前端实现。

## 技术栈

- **Vue 3** - 渐进式JavaScript框架
- **TypeScript** - 类型安全
- **Pinia** - 状态管理
- **Vite** - 构建工具
- **pnpm** - 包管理器

## 功能特性

- 🎮 完整的斗地主游戏流程（发牌、叫地主、出牌、结算）
- 🤖 高级AI对手（记牌、拆牌优化、动态策略）
- 🎨 简约风格UI，纯CSS绘制扑克牌
- 📱 响应式设计

## 项目结构

```
src/
├── types/card.ts           # 类型定义
├── logic/
│   ├── deck.ts             # 发牌、洗牌
│   ├── cardType.ts         # 牌型识别
│   ├── compare.ts          # 牌型比较
│   └── ai/                 # AI策略引擎
│       ├── cardCounter.ts  # 记牌器
│       ├── handAnalyzer.ts # 拆牌优化器
│       └── playDecider.ts  # 出牌决策器
├── stores/game.ts          # Pinia游戏状态
├── components/
│   ├── GameBoard.vue       # 主界面
│   ├── PlayerHand.vue      # 手牌区
│   ├── CardItem.vue        # 单张牌
│   ├── PlayedCards.vue     # 出牌区
│   ├── InfoPanel.vue       # 信息面板
│   ├── BidPanel.vue        # 叫地主面板
│   └── ResultDialog.vue    # 结算弹窗
└── App.vue
```

## 快速开始

### 环境要求

- Node.js 18+
- pnpm 8+

### 安装依赖

```bash
pnpm install
```

### 开发模式

```bash
pnpm dev
```

### 构建生产版本

```bash
pnpm build
```

### 预览生产版本

```bash
pnpm preview
```

## 游戏规则

### 牌型

- **单张**：任意一张牌
- **对子**：两张相同点数的牌
- **三张**：三张相同点数的牌
- **三带一**：三张相同点数的牌 + 一张单牌
- **三带二**：三张相同点数的牌 + 一对
- **顺子**：五张或更多连续点数的牌（不含2和王）
- **连对**：三对或更多连续点数的对子（不含2和王）
- **飞机**：两个或更多连续点数的三张（不含2和王）
- **飞机带翅膀**：飞机 + 同数量单牌/对子
- **四带二**：四张相同点数的牌 + 两张单牌/两对
- **炸弹**：四张相同点数的牌
- **火箭**：大王 + 小王（最大牌型）

### 游戏流程

1. **发牌**：每人17张，留3张底牌
2. **叫地主**：玩家轮流竞叫，叫牌最高者成为地主
3. **底牌分配**：地主获得3张底牌
4. **轮流出牌**：地主先出，顺时针轮流
5. **结算**：先出完手牌的一方获胜

## AI策略

AI引擎包含三大模块：

1. **记牌器**：跟踪已出牌，推断对手牌力
2. **拆牌优化器**：贪心+回溯搜索最优拆牌组合，目标最少出牌次数
3. **出牌决策器**：主动出牌出弱牌、被动跟牌评估价值、农民协作配合

## 许可证

MIT
